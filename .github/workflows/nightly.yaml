name: nightly build
on: 
  pull_request:
  schedule:
    - cron: '1 8 * * *'
  workflow_dispatch:

jobs:
  build_and_test:
    name: rmf_all
    uses: open-rmf/rmf_ci_templates/.github/workflows/reusable_build.yaml@main
    with:
      # NOTE: Avoid adding comments in the packages lines, this can break some of the called scripts in github actions
      packages: |
        rmf_utils
        rmf_traffic
        rmf_task
        rmf_battery
        rmf_fleet_adapter
        rmf_fleet_adapter_python
        rmf_task_ros2
        rmf_traffic_ros2
        rmf_visualization
        rmf_visualization_building_systems
        rmf_visualization_fleet_states
        rmf_visualization_rviz2_plugins
        rmf_visualization_schedule
        rmf_building_sim_common
        rmf_building_sim_gz_plugins
        rmf_building_sim_gz_classic_plugins
        rmf_robot_sim_common
        rmf_robot_sim_gz_plugins
        rmf_robot_sim_gz_classic_plugins
        rmf_building_map_tools
        rmf_traffic_editor
        rmf_traffic_editor_assets
        rmf_traffic_editor_test_maps
        rmf_demos
        rmf_demos_gz
        rmf_demos_gz_classic
        rmf_demos_assets
        rmf_demos_dashboard_resources
        rmf_demos_maps
        rmf_demos_panel
        rmf_demos_tasks
